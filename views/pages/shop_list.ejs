<%- include('../partials/header', { title: 'ÂïÜÂ∫óÂàóË°®', isAuthenticated: isAuthenticated }) %>

<link rel="stylesheet" href="/css/style.css">

<main>
    <div class="container">
        <!-- È°µÈù¢Ê†áÈ¢ò -->
        <div class="d-flex align-items-center mt-3 mb-4">
            <button onclick="history.back()" class="btn btn-back me-3" title="ËøîÂõû‰∏ä‰∏ÄÈ°µ">
                <i class="bi bi-arrow-left"></i> ËøîÂõû
            </button>
            <h2 class="mb-0 fw-bold">üè™ ÂïÜÂ∫óÂàóË°®</h2>
        </div>
        
        <!-- ÂïÜÂ∫óÁΩëÊ†º -->
        <div class="row">
            <% if (shops && shops.length > 0) { %>
                <% shops.forEach(shop => { %>
                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card shop-card h-100">
                            <!-- ÂïÜÂ∫óÊ®™ÂπÖ -->
                            <div class="shop-banner" style="background-image: url('<%= shop.banner_url || shop.logo_url || "https://via.placeholder.com/400x200?text=ÂïÜÂ∫ó" %>');">
                                <div class="shop-overlay">
                                    <img src="<%= shop.logo_url || "https://via.placeholder.com/80?text=Logo" %>" 
                                         class="shop-logo" alt="<%= shop.name %>">
                                </div>
                            </div>
                            
                            <!-- ÂïÜÂ∫ó‰ø°ÊÅØ -->
                            <div class="card-body">
                                <h5 class="card-title fw-bold"><%= shop.name %></h5>
                                <p class="card-text text-muted small"><%= shop.description || 'ÊöÇÊó†ÊèèËø∞' %></p>
                                
                                <!-- ÂïÜÂ∫óÁªüËÆ° -->
                                <div class="shop-stats mb-3">
                                    <div class="row text-center">
                                        <div class="col-4">
                                            <div class="stat-item">
                                                <div class="stat-number"><%= shop.productCount %></div>
                                                <div class="stat-label">ÂïÜÂìÅ</div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="stat-item">
                                                <div class="stat-number">
                                                    <% if (shop.rating) { %>
                                                        <%= shop.rating.toFixed(1) %>
                                                    <% } else { %>
                                                        4.5
                                                    <% } %>
                                                </div>
                                                <div class="stat-label">ËØÑÂàÜ</div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="stat-item">
                                                <div class="stat-number">¬•<%= shop.avgPrice || '0' %></div>
                                                <div class="stat-label">Âùá‰ª∑</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- ÂïÜÂ∫óÂú∞ÂùÄ -->
                                <% if (shop.address) { %>
                                    <p class="text-muted small mb-2">
                                        <i class="bi bi-geo-alt me-1"></i>
                                        <%= shop.address %>
                                    </p>
                                <% } %>
                                
                                <!-- ËøõÂÖ•ÂïÜÂ∫óÊåâÈíÆ -->
                                <a href="/shop/<%= shop.id %>" class="btn btn-primary w-100">
                                    <i class="bi bi-shop me-1"></i>
                                    ËøõÂÖ•ÂïÜÂ∫ó
                                </a>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <!-- Á©∫Áä∂ÊÄÅ -->
                <div class="col-12">
                    <div class="text-center py-5">
                        <i class="bi bi-shop display-1 text-muted mb-3"></i>
                        <h4 class="text-muted mb-3">ÊöÇÊó†ÂïÜÂ∫ó</h4>
                        <p class="text-muted mb-4">ÁõÆÂâçËøòÊ≤°ÊúâÂïÜÂ∫óÂÖ•È©ª</p>
                        <a href="/" class="btn btn-primary">ËøîÂõûÈ¶ñÈ°µ</a>
                    </div>
                </div>
            <% } %>
        </div>
    </div>
</main>

<%- include('../partials/footer') %> 